
{% extends "layout.html" %}

{% block title %}
    Upload
{% endblock %}

{% block main %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
    function myFunction(giphname) {
        var test = { name: giphname, id: "send_giphy" }

        document.getElementById("demo").innerHTML = test['name'];
            $(document).ready(function(){
            $("#send_giphy").on("click", function(){
                $.ajax({type : "POST",
                    url : "{{ url_for('upload') }}",
                    data: JSON.stringify(test),
                    contentType: 'application/json;charset=UTF-8',
                });
            });
        });
    }
    </script>

    <script>
    var giphyInput = document.getElementById("giphy");

    // When the user clicks on the password field, show the message box
    giphyInput.onfocus = function() {
        document.getElementById("message").style.display = "block";
    };

    // When the user clicks outside of the password field, hide the message box
    giphyInput.onblur = function() {
      document.getElementById("message").style.display = "none";
    };
    </script>


    <h4>Upload a picture to the stack</h4>
        <p id="demo"></p>
    <form method="post" enctype="multipart/form-data" action="{{url_for('upload')}}">
        <input type="description" placeholder="description" name="description" id="description">
        <br/>
        <input type="file" name="photo" class="button" id="choosefile">

        <input type="submit" class="button" id="uploadbutton">
        <input type="description" placeholder="gif keyword" name="giphy" id="giphy">
        <br/>
        <button class = "btn btn-default animate" name ="giphysubmit" id = "giphysubmit" type="submit">Gimme giphy's!</button>
    </form>



    <div>

    {% for i in urldata %}
        <img src={{ i }} id = "send_giphy" name = {{ i }} onclick ="myFunction(name, id)" >
    {% endfor %}

    </div>

{% endblock %}